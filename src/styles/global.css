/* Global styles for consistent theming across all pages */

/* Prevent zoom-out layout breaks on mobile */
html {
  overflow-x: hidden;
  width: 100vw;
  touch-action: manipulation; /* Disable double-tap zoom, allow accessibility zoom */
}

body {
  overflow-x: hidden;
  min-width: 320px; /* Minimum width to prevent layout collapse */
  touch-action: manipulation; /* Modern approach to disable double-tap zoom */
  font-optical-sizing: auto;
  font-family: "Source Serif 4", ui-serif, Georgia, Cambria, "Times New Roman", Times, serif !important;
}

/* Prevent iOS input auto-zoom by ensuring minimum font size */
input, textarea, select {
  font-size: 16px;
}

@media (max-width: 640px) {
  input, textarea, select {
    font-size: 16px; /* Prevent iOS auto-zoom on input focus */
  }
}

/* Universal prose styling for content areas */
.prose-universal {
  @apply text-text-primary prose prose-lg prose-invert max-w-none;
  @apply prose-headings:text-text-primary prose-headings:font-heading;
  @apply prose-a:text-highlight prose-a:no-underline hover:prose-a:text-highlight/80;
  @apply prose-code:text-text-primary prose-code:bg-warm/30 prose-code:px-1 prose-code:py-0.5 prose-code:rounded;
  @apply prose-pre:bg-secondary prose-pre:text-text-primary;
  @apply prose-strong:text-text-primary;
  @apply prose-ul:text-text-primary prose-li:text-text-primary;
  @apply prose-img:rounded-lg prose-img:shadow-lg;
  font-size: 21px; /* Custom size for Source Serif 4 Variable */
  line-height: 1.58; /* Custom line height */
  font-optical-sizing: auto;
}

/* Conservative heading sizes based on 21px body text following typography best practices */
.prose-universal h1 {
  font-size: 32px; /* 1.5x body text - less overwhelming */
  line-height: 1.3;
}

.prose-universal h2 {
  font-size: 27px; /* 1.3x body text - clear hierarchy */
  line-height: 1.4;
}

.prose-universal h3 {
  font-size: 24px; /* 1.15x body text - subtle but distinct */
  line-height: 1.4;
}

.prose-universal h4 {
  font-size: 22px; /* 1.05x body text - slightly larger than body */
  line-height: 1.4;
}

/* Constrain text content width while allowing images to break out */
.prose-universal > * {
  max-width: 65ch;
  margin-left: auto;
  margin-right: auto;
}

/* Force images and their containers to use full width */
.prose-universal p:has(img),
.prose-universal div:has(img),
.prose-universal figure,
.prose-universal .aspect-video,
.prose-universal pre {
  max-width: none !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
}

/* Direct image styling */
.prose-universal img {
  max-width: none !important;
  width: 100% !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
}

/* Alternative approach: Use CSS Grid for breakout */
.prose-universal {
  display: grid;
  grid-template-columns: 
    1fr 
    min(65ch, 100%) 
    1fr;
}

.prose-universal > * {
  grid-column: 2;
  max-width: none;
  margin-left: 0;
  margin-right: 0;
}

.prose-universal > img,
.prose-universal > figure,
.prose-universal > pre,
.prose-universal > .aspect-video,
.prose-universal > p:has(img),
.prose-universal > div:has(img) {
  grid-column: 1 / -1;
}

/* Image captions styling - constrained to text column width */
.prose-universal p:has(img) em,
.prose-universal img + em {
  @apply block text-center text-text-muted italic;
  font-size: 18px; /* ~85% of 21px body text - standard caption convention */
  margin-top: 0.5rem; /* 8px - tighter spacing */
  margin-bottom: 1.5rem; /* 24px - consistent with paragraph spacing */
  line-height: 1.4; /* Slightly tighter than body text */
  max-width: 65ch; /* Match body text width constraint */
  margin-left: auto;
  margin-right: auto;
}

/* Remove bottom margin from images when followed by captions */
.prose-universal img:has(+ em) {
  @apply mb-0;
}

/* Universal card styling */
.card-universal {
  @apply bg-secondary rounded-lg border border-tertiary p-4 sm:p-6;
}

/* Universal button styling */
.btn-primary {
  @apply inline-flex items-center px-4 py-2 rounded-md font-medium transition-colors;
  @apply bg-highlight text-primary hover:bg-highlight/80;
}

.btn-secondary {
  @apply inline-flex items-center px-4 py-2 rounded-md font-medium transition-colors;
  @apply bg-secondary text-text-primary hover:bg-tertiary hover:text-text-primary;
}

/* Universal layout spacing */
.page-container {
  @apply max-w-6xl mx-auto px-4 sm:px-6 lg:px-8;
}

.content-container {
  @apply max-w-4xl mx-auto px-4 sm:px-6 lg:px-8;
}

/* Universal accent styling */
.accent-border {
  @apply border-l-4 border-l-highlight;
}

/* Enhanced button variants */
.btn-link {
  @apply inline-flex items-center text-highlight hover:text-highlight/80 font-medium transition-colors;
}

.btn-link-with-arrow {
  @apply inline-flex items-center text-highlight hover:text-highlight/80 font-medium transition-colors;
}

.btn-link-arrow {
  @apply w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform;
}

/* Universal heading styles - Following modern blog typography best practices */
.heading-xl {
  @apply font-heading font-semibold text-text-primary leading-tight;
  font-size: 36px; /* Larger than prose H2 (27px) to maintain hierarchy */
  letter-spacing: -0.02em;
}

.heading-lg {
  @apply text-lg sm:text-xl font-heading font-semibold text-text-primary leading-tight;
}

.heading-md {
  @apply text-base sm:text-lg font-heading font-medium text-text-primary;
}

.heading-sm {
  @apply text-sm sm:text-base font-heading font-medium text-text-primary;
}

/* Universal text colors - using semantic tokens */
.text-primary {
  @apply text-text-primary;
}

.text-secondary {
  @apply text-text-primary;
}

.text-muted {
  @apply text-text-muted;
}

.text-accent {
  @apply text-highlight;
}

.text-accent-hover {
  @apply text-highlight hover:text-highlight/80 transition-colors;
}


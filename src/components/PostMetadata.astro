---
import Tag from './Tag.astro';
import { formatDate } from '../utils/date';
import { formatReadingTime } from '../utils/readingTime';

export interface Props {
  /**
   * Publication date
   */
  pubDate: Date;
  /**
   * Last updated date (optional)
   */
  updatedDate?: Date;
  /**
   * Array of tags
   */
  tags?: string[];
  /**
   * Author name (optional)
   */
  author?: string;
  /**
   * Reading time in minutes (optional)
   */
  readingTime?: number;
  /**
   * Additional CSS classes to apply
   */
  class?: string;
}

const { pubDate, updatedDate, tags = [], author = 'Liam Gilbride', readingTime, class: className = '' } = Astro.props;
---

<div class={`flex flex-wrap items-center gap-3 text-sm text-text-primary ${className}`}>
  <span class="font-medium">By {author}</span>
  
  <span>•</span>
  <time datetime={pubDate.toISOString()}>
    {formatDate(pubDate)}
  </time>
  
  {readingTime && (
    <>
      <span>•</span>
      <span class="text-text-primary">
        {formatReadingTime(readingTime)}
      </span>
    </>
  )}
  
  {updatedDate && (
    <>
      <span>•</span>
      <span class="text-text-primary">
        Updated {formatDate(updatedDate)}
      </span>
    </>
  )}
  
  {tags.length > 0 && (
    <>
      <span>•</span>
      <div class="flex flex-wrap gap-1">
        {tags.map((tag) => (
          <Tag tag={tag} />
        ))}
      </div>
    </>
  )}
</div>